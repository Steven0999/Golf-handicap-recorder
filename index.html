<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golf Handicap Calculator ‚Äî WHS</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="app">
      <h1>Golf Handicap Calculator</h1>
      <p class="sub">
        Default mode: <strong>WHS (official)</strong> ‚Äî best 8 of 20, or WHS table when &lt;20 scores. Rounds are saved in your browser.
      </p>

      <!-- Mode switch -->
      <div class="panel panel-bottom" style="margin-top:0">
        <div class="row" style="align-items:center; gap:16px">
          <label for="mode" style="flex:0 0 auto">Mode</label>
          <select id="mode" style="max-width:260px">
            <option value="whs" selected>WHS (official)</option>
            <option value="custom">Custom (lowest N √ó bonus)</option>
          </select>
          <small class="muted">WHS ignores the 0.96 multiplier and uses the official selection/adjustment table.</small>
        </div>
      </div>

      <div class="grid">
        <!-- LEFT: Inputs -->
        <div class="panel panel-left">
          <h2>‚ûï Add / Edit Round</h2>
          <div class="row">
            <div>
              <label for="ags">Adjusted Gross Score (AGS)</label>
              <input id="ags" type="number" step="0.1" placeholder="e.g. 95" />
            </div>
            <div>
              <label for="cr">Course Rating</label>
              <input id="cr" type="number" step="0.1" placeholder="e.g. 72.0" />
            </div>
            <div>
              <label for="slope">Slope Rating</label>
              <input id="slope" type="number" step="1" placeholder="e.g. 120" />
            </div>
            <div>
              <label for="pcc">PCC (‚àí1 to +3, usually 0)</label>
              <input id="pcc" type="number" step="1" value="0" />
            </div>
          </div>
          <div class="actions">
            <button id="addBtn">Add Round</button>
            <button id="updateBtn" class="secondary" disabled>Update Selected</button>
            <button id="clearFormBtn" class="secondary">Clear Form</button>
          </div>

          <hr class="rule" />

          <!-- Custom settings (hidden in WHS mode) -->
          <div id="customSettings" hidden>
            <h2>‚öôÔ∏è Custom Settings</h2>
            <div class="row">
              <div>
                <label for="useCount">Use Lowest N Differentials</label>
                <input id="useCount" type="number" min="1" step="1" value="1" />
              </div>
              <div>
                <label for="bonus">Bonus Multiplier</label>
                <input id="bonus" type="number" step="0.01" value="0.96" />
              </div>
              <div>
                <label for="targetSlope">Target Slope (for Course Handicap)</label>
                <input id="targetSlope" type="number" step="1" value="120" />
              </div>
            </div>
            <div class="actions">
              <button id="resetSettings" class="secondary">Reset Custom</button>
            </div>
          </div>

          <!-- WHS settings (simple, just course handicap slope) -->
          <div id="whsSettings">
            <h2>‚öôÔ∏è WHS Settings</h2>
            <div class="row">
              <div>
                <label for="targetSlopeWHS">Target Slope (for Course Handicap)</label>
                <input id="targetSlopeWHS" type="number" step="1" value="120" />
              </div>
            </div>
          </div>

          <details class="data-mgmt" style="margin-top:12px">
            <summary>Import / Export & Data Management</summary>
            <div class="row detail-row">
              <div class="actions">
                <button id="exportBtn" class="secondary">Export JSON</button>
                <button id="importBtn" class="secondary">Import JSON</button>
                <button id="clearAllBtn" class="danger">Clear All Rounds</button>
              </div>
              <small class="footnote">Data auto-saves in your browser. Export to back it up.</small>
            </div>
          </details>
        </div>

        <!-- RIGHT: Table & KPIs -->
        <div class="panel panel-right">
          <div class="row header-row">
            <h2>üìã Rounds & Differentials</h2>
            <span class="pill ghost"><span id="countLabel">0</span> rounds</span>
          </div>

          <div class="table-wrap">
            <table id="roundsTable">
              <thead>
                <tr>
                  <th>#</th>
                  <th>AGS</th>
                  <th>CR</th>
                  <th>Slope</th>
                  <th>PCC</th>
                  <th>Differential</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>

          <div class="totals">
            <div class="kpi">
              <h3>Method</h3>
              <div class="value"><span id="methodLabel">WHS</span></div>
              <small id="methodNote">WHS table (best N + adj)</small>
            </div>
            <div class="kpi">
              <h3>Differentials Used</h3>
              <div class="value"><span id="usedN">0</span></div>
              <small id="adjNote">Adj: 0.0</small>
            </div>
            <div class="kpi">
              <h3>Handicap Index</h3>
              <div class="value"><span id="handicapIdx">‚Äî</span></div>
              <small>Rounded to 1 decimal</small>
            </div>
            <div class="kpi">
              <h3>Course Handicap</h3>
              <div class="value"><span id="courseHcp">‚Äî</span></div>
              <small>Target slope √ó HI √∑ 113 (rounded)</small>
            </div>
          </div>

          <p class="footnote">
            WHS: average the lowest <em>N</em> Score Differentials (per Rule 5.2a table), apply any listed adjustment, round to 0.1.  
            Differential = (113 / Slope) √ó (AGS ‚àí CR ‚àí PCC). Best 8 of 20 when you have 20 scores. Ó®Å1Ó®Ç
          </p>
        </div>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
                           </html>
