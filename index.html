<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golf Handicap Calculator ‚Äî Interactive</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <div class="app">
      <h1>Golf Handicap Calculator</h1>
      <p class="sub">
        Plug in your rounds. It auto-updates your Handicap Index using your example method
        (lowest 1 differential √ó <span class="mono" id="bonusLabel">0.96</span>). üî®ü§ñüîß
      </p>

      <div class="grid">
        <!-- Input panel -->
        <div class="panel panel-left">
          <h2>‚ûï Add / Edit Round</h2>
          <div class="row">
            <div>
              <label for="ags" class="with-info">
                Adjusted Gross Score (AGS)
                <button class="info-btn" type="button" data-topic="ags" aria-label="What is AGS?">‚ìò</button>
              </label>
              <input id="ags" type="number" inputmode="decimal" step="0.1" placeholder="e.g. 95" />
            </div>
            <div>
              <label for="cr" class="with-info">
                Course Rating
                <button class="info-btn" type="button" data-topic="cr" aria-label="What is Course Rating?">‚ìò</button>
              </label>
              <input id="cr" type="number" inputmode="decimal" step="0.1" placeholder="e.g. 72.0" />
            </div>
            <div>
              <label for="slope" class="with-info">
                Slope Rating
                <button class="info-btn" type="button" data-topic="slope" aria-label="What is Slope Rating?">‚ìò</button>
              </label>
              <input id="slope" type="number" inputmode="decimal" step="1" placeholder="e.g. 120" />
            </div>
          </div>
          <div class="actions">
            <button id="addBtn">Add Round</button>
            <button id="updateBtn" class="secondary" disabled>Update Selected</button>
            <button id="clearFormBtn" class="secondary">Clear Form</button>
          </div>

          <hr class="rule" />

          <h2>‚öôÔ∏è Calculation Settings</h2>
          <div class="row">
            <div>
              <label for="useCount">Use Lowest N Differentials</label>
              <input id="useCount" type="number" min="1" step="1" value="1" />
            </div>
            <div>
              <label for="bonus">Bonus (Excellence Factor)</label>
              <input id="bonus" type="number" step="0.01" value="0.96" />
            </div>
            <div>
              <label for="targetSlope">Target Slope (for Course Handicap)</label>
              <input id="targetSlope" type="number" step="1" value="120" />
            </div>
          </div>
          <div class="actions">
            <button id="resetSettings" class="secondary">Reset Settings</button>
          </div>

          <details class="data-mgmt">
            <summary>Import / Export & Data Management</summary>
            <div class="row detail-row">
              <div class="actions">
                <button id="exportBtn" class="secondary">Export JSON</button>
                <button id="importBtn" class="secondary">Import JSON</button>
                <button id="clearAllBtn" class="danger">Clear All Rounds</button>
              </div>
              <small class="footnote">Data auto-saves in your browser. Export to back it up.</small>
            </div>
          </details>
        </div>

        <!-- Table panel -->
        <div class="panel panel-right">
          <div class="row header-row">
            <h2>üìã Rounds & Differentials</h2>
            <span class="pill ghost"><span id="countLabel">0</span> rounds</span>
          </div>
          <div class="table-wrap">
            <table id="roundsTable" aria-describedby="countLabel">
              <thead>
                <tr>
                  <th>#</th>
                  <th>AGS</th>
                  <th>CR</th>
                  <th>Slope</th>
                  <th>Differential</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="tbody"></tbody>
            </table>
          </div>

          <div class="totals">
            <div class="kpi">
              <h3>Lowest N Used</h3>
              <div class="value"><span id="usedN">0</span></div>
              <small>Highlighted in the table</small>
            </div>
            <div class="kpi">
              <h3>Handicap Index</h3>
              <div class="value"><span id="handicapIdx">‚Äî</span></div>
              <small>Rounded to 1 decimal</small>
            </div>
            <div class="kpi">
              <h3>Course Handicap</h3>
              <div class="value"><span id="courseHcp">‚Äî</span></div>
              <small>Target slope √ó HI √∑ 113 (rounded)</small>
            </div>
          </div>

          <p class="footnote">
            Formula per your example: <code class="inline">Differential = ((AGS ‚àí CR) √ó 113) / Slope</code>, use the lowest N differentials,
            multiply the average by a bonus factor (default <span class="mono">0.96</span>), then round to 1 decimal. Course Handicap =
            <code class="inline">HI √ó (TargetSlope / 113)</code>, rounded to the nearest whole number. ‚ùó
          </p>
        </div>
      </div>

      <div class="panel panel-bottom">
        <h2>üß™ Quick Fill (Your 3-Round Example)</h2>
        <div class="row">
          <button id="loadExample" class="secondary">Load Example Rounds</button>
          <small class="muted">Adds 95/72.0/120, 88/71.0/113, 102/73.0/130; sets lowest N=1, bonus=0.96, target slope=120.</small>
        </div>
      </div>
    </div>
  </div>

  <!-- Info Modal -->
  <div id="infoModal" class="modal" role="dialog" aria-modal="true" aria-labelledby="modalTitle" aria-describedby="modalBody" hidden>
    <div class="modal-backdrop" data-close="backdrop"></div>
    <div class="modal-card" role="document">
      <header class="modal-header">
        <h2 id="modalTitle">Title</h2>
        <button class="modal-close" type="button" aria-label="Close info" data-close="button">‚úï</button>
      </header>
      <div id="modalBody" class="modal-body"></div>
      <footer class="modal-footer">
        <button class="secondary" type="button" data-close="button">Close</button>
      </footer>
    </div>
  </div>

  <script src="app.js"></script>
</body>
                </html>
