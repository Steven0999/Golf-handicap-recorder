<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Golf Scorecard</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <!-- Header with burger -->
  <header class="app-header">
    <button id="burger" class="burger" aria-label="Open menu" aria-expanded="false">
      <span></span><span></span><span></span>
    </button>
    <h1 class="app-title">Golf Scorecard</h1>
  </header>

  <!-- Sidebar / Drawer -->
  <nav id="drawer" class="drawer" aria-hidden="true">
    <div class="drawer-header">Menu</div>
    <button class="drawer-link" data-route="scorecard">Scorecard</button>
    <button class="drawer-link" data-route="history">History</button>
    <button class="drawer-link" data-route="profiles">Player Profiles</button>
    <button class="drawer-link" data-route="leaderboard">Course Leaderboard</button>
    <button class="drawer-link" data-route="history" data-hash="hi">Handicap (WHS)</button>
  </nav>

  <main class="wrap">

    <!-- PAGE: Scorecard (this page) -->
    <section class="page" data-page="scorecard">
      <section class="card">
        <div class="grid cols-5">
          <div>
            <label>Course</label>
            <input id="course" type="text" placeholder="Course name" />
          </div>
          <div>
            <label>Area</label>
            <input id="area" type="text" placeholder="Region" />
          </div>

          <div>
            <label>Players (catalog)</label>
            <select id="playerSelect"></select>
            <button class="btn" id="openAddPlayerModal" style="margin-top:8px;">Add New Player</button>
            <div id="playerList" class="player-list"></div>
          </div>

          <div>
            <label>Holes</label>
            <select id="holes">
              <option value="18">18</option>
              <option value="9">9</option>
              <option value="12">12</option>
            </select>
          </div>

          <div>
            <label>How many people?</label>
            <input id="roundCount" type="number" min="1" max="8" value="2" />
            <label style="margin-top:8px;">Select players for this round</label>
            <select id="roundPlayerSelect" multiple size="6" class="round-select"></select>
          </div>
        </div>

        <div style="display:flex;gap:8px;justify-content:flex-end;margin-top:10px;">
          <button class="btn primary" id="generate">Generate</button>
          <button class="btn primary" id="saveHistory">Save</button>
        </div>
      </section>

      <!-- Live Scorecard (per-hole strokes + par) -->
      <section class="card" id="workspace"></section>

      <!-- Round totals (par & score side-by-side + preview differential) -->
      <section class="card" id="roundTotalsCard">
        <h3>Round Totals</h3>
        <div class="grid cols-4">
          <div class="kpi">
            <h4>Total Par</h4>
            <div class="value mono" id="totalParKPI">0</div>
          </div>
          <div class="kpi">
            <h4>Total Score (AGS*)</h4>
            <div class="value mono" id="totalScoreKPI">0</div>
            <small class="muted">*Using total score as AGS unless capped later</small>
          </div>
          <div class="kpi">
            <h4>Score vs Par</h4>
            <div class="value mono" id="scoreVsParKPI">+0</div>
          </div>
          <div class="kpi">
            <h4>Preview Differential</h4>
            <div class="value mono" id="previewDiffKPI">—</div>
            <small class="muted">WHS: (113 / Slope) × (AGS − CR − PCC)</small>
          </div>
        </div>
      </section>

      <!-- WHS Course Data panel -->
      <section class="card" id="whsCourseData">
        <h3>Course Data (WHS Differential)</h3>
        <p class="muted">If unknown, use <strong>Course Rating = Total Par</strong>, <strong>Slope = 113</strong>, <strong>PCC = 0</strong>.</p>
        <div class="grid cols-4">
          <div>
            <label for="courseRating">Course Rating <button class="info-btn" type="button" data-topic="cr" aria-label="What is Course Rating?">ⓘ</button></label>
            <input id="courseRating" type="number" step="0.1" placeholder="Defaults to Total Par" />
          </div>
          <div>
            <label for="slopeRating">Slope Rating <button class="info-btn" type="button" data-topic="slope" aria-label="What is Slope Rating?">ⓘ</button></label>
            <input id="slopeRating" type="number" step="1" value="113" />
          </div>
          <div>
            <label for="pcc">PCC (−1 to +3) <button class="info-btn" type="button" data-topic="pcc" aria-label="What is PCC?">ⓘ</button></label>
            <input id="pcc" type="number" step="1" value="0" />
          </div>
          <div>
            <label for="targetSlopeScorecard">Target Slope (Course Handicap)</label>
            <input id="targetSlopeScorecard" type="number" step="1" value="120" />
          </div>
        </div>
        <div class="actions" style="margin-top:10px;justify-content:flex-end">
          <button class="btn" id="recalcPreview">Recalculate Preview</button>
          <button class="btn secondary" id="goToHistory">View Handicap in History</button>
        </div>
      </section>

      <!-- Summary (kept) -->
      <section class="card" id="summary"></section>
    </section>
  </main>

  <!-- Add Player Modal -->
  <div id="addPlayerModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-dismiss="modal"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="addPlayerTitle">
      <h3 id="addPlayerTitle">Add New Player</h3>
      <form id="modalPlayerForm" class="modal-form">
        <label for="modalPlayerName">Player name</label>
        <input id="modalPlayerName" type="text" placeholder="Enter player name" required />
        <label class="muted" style="display:flex;align-items:center;gap:8px;margin-top:8px;">
          <input id="modalAddAlsoToRound" type="checkbox" />
          Also add to this round
        </label>
        <div class="modal-actions">
          <button type="button" class="btn" id="cancelAddPlayer">Cancel</button>
          <button type="submit" class="btn primary" id="saveAddPlayer">Save Name</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Info Modal for CR/Slope/PCC -->
  <div id="infoModal" class="modal" aria-hidden="true">
    <div class="modal-backdrop" data-dismiss="modal"></div>
    <div class="modal-card" role="dialog" aria-modal="true" aria-labelledby="infoTitle">
      <h3 id="infoTitle">Info</h3>
      <div id="infoBody" class="modal-body"></div>
      <div class="modal-actions">
        <button type="button" class="btn" data-dismiss="modal">Close</button>
      </div>
    </div>
  </div>

  <script src="app.js"></script>
</body>
            </html>
